---
title: ğŸ¥œ [React] ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµí•˜ê¸° (ContextAPI, Redux, Recoil, Zustand)
date: 2023-10-22 13:40:00 +0800
categories: [Study, Frontend]
tags: [React, ContextAPI, Redux, Recoil, Zustand, Frontend]
---

## ì™œ?

> ìƒíƒœê´€ë¦¬ë€?
>
> í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `state`ëŠ” `Rendering`í•˜ëŠ”ë° ìˆì–´ì„œ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆëŠ” ê°’
{: .prompt-tip }

> ìƒíƒœë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠëƒì— ë”°ë¼ ë¡œë”©ì†ë„ì™€ ì‚¬ìš©ê° ê°œì„ ì´ í™•ì—°íˆ ì°¨ì´ê°€ ë‚œë‹¤.
> 
> Frontend ê°œë°œìì—ê²Œ ìƒíƒœê´€ë¦¬ëŠ” ì¤‘ìš”í•œ ì„ë¬´ê°€ ë˜ì—ˆë‹¤.
> 
> ë”°ë¼ì„œ íšŒì‚¬ë§ˆë‹¤ ìƒíƒœê´€ë¦¬ í•˜ëŠ” ë²•ë„ ì œê°ê¸° ë‹¤ë¥´ê¸° ë–„ë¬¸ì—
> 
> í•­ìƒ ì‚¬ìš©í•˜ë˜ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì™¸ì— ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼
> 
> ì‚¬ìš©í•´ë³´ê³ ì ì˜¤ëŠ˜ì€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì•Œì•„ë³¼ ìƒê°ì´ë‹¤.

<br/>
<hr/>
 
## ContextAPI

![image-context-api](../assets/img/2023-10-17/image-context-api.png){: .w-25 }

ë¨¼ì € ì•Œì•„ë³¼ ê²ƒì€ `ContextAPI`. ì •ë§ ì˜¤ë˜ëœ ê¸°ìˆ ì´ë‹¤.

ê·¸ë§Œí¼ `React` ë‚´ì— ìì²´ì ìœ¼ë¡œ ë‚´ì¥ ë˜ì–´ìˆëŠ” ê¸°ìˆ ì´ë‹¤. ì“°ê¸°ë„ ë‚˜ì˜ì§€ ì•Šì€ í¸ì´ì§€ë§Œ

ë‹¨ì ì€ í›„ìˆ í•˜ë„ë¡ í•˜ê² ë‹¤.

```tsx
// GlobalProvider.tsx
{% raw %}
import { ReactNode, createContext, useState } from "react";

interface IContextProps {
  counter: number;
  onPlus: () => void;
} // ì „ì—­ë³€ìˆ˜ì˜ íƒ€ì… ì§€ì •

interface IProviderProps {
  children: ReactNode;
} // ì „ì—­ë³€ìˆ˜ë¥¼ ê°€ì ¸ë‹¤ ì“¸ children-component ì˜ type ì„¤ì •

export const CounterContext = createContext<IContextProps>({
  counter: 0,
  onPlus: () => {},
}); // ì „ì—­ë³€ìˆ˜ë¥¼ ë‹´ì„ Context ë¥¼ ìƒì„± ë° ì´ˆê¸°ê°’ ì§€ì •

export default function GlobalProvider({ children }: IProviderProps) {
  const [counter, setCounter] = useState<number>(0);

  const onPlus = () => {
    setCounter((current: number) => (current += 1));
  };

  return (
    <CounterContext.Provider value={{ counter, onPlus }}>
        {children}
    </CounterContext.Provider>

  ); // ì „ì—­ë³€ìˆ˜ë¥¼ ë‹´ê³  ìˆëŠ” CounterContext.Provider ë¡œ children-component ë¥¼ ê°ì‹¼ë‹¤!
{% endraw %}
}
```

> 1. ë¨¼ì €, global-state ë¥¼ ê´€ë¦¬ í•  Provider ë¥¼ ìƒì„±í•œë‹¤.
> 
> 2. global-state ë¥¼ ë‹´ì„ context ë¥¼ ìƒì„± í•œ í›„
>
> 3. í›„ì— ë¿Œë ¤ì§ˆ children-component ì— ê°ì‹¸ì¤€ë‹¤.

<br/>

```tsx
{% raw %}
// main.tsx (index.tsx)
import ReactDOM from "react-dom/client";
import App from "./App.tsx";
import GlobalProvider from "./GlobalProvider.tsx";
import { BrowserRouter } from "react-router-dom";

ReactDOM.createRoot(document.getElementById("root")!).render(
  <BrowserRouter>
    <GlobalProvider>
      <App />
    </GlobalProvider>
  </BrowserRouter>
);
{% endraw %}
```

```tsx
// test01.tsx
import { useContext } from "react";
import { CounterContext } from "./GlobalProvider";

export default function Text1() {
  const { counter, onPlus } = useContext(CounterContext);
  // Context ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ useContext ë¥¼ ì´ìš©í•´ CounterContext ë¥¼ ì—°ê²°
  return (
    <div>
      <p>COUNT : {counter}</p>
      <button onClick={onPlus}>+++</button>
    </div>
  );
}
```

> ContextAPI ëŠ” React ì— ìì²´ ë‚´ì¥ë˜ì–´ìˆë‹¤ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ë§¤ë ¥ì ì¸ë°
>
> ë‹¨ì ì´ ìˆì—ˆë‹¤.
>
> í•œë²ˆ ìˆ˜ì • ë˜ë©´ Provider ë‚´ ëª¨ë“  Components ê°€ re-rendering ëœë‹¤ëŠ” ê²ƒ...
>
> ë”°ë¼ì„œ ë¶ˆí•„ìš”í•œ rendering ì´ ë§ì•„ì§„ë‹¤.

<br/>

{% include embed/youtube.html id='3K3MMtoG8rY' %}
<small>
_(ì´ ì•„ì €ì”¨ ì²˜ëŸ¼ ëœë‹¤... ~~ì‹ ë‚˜ëŠ”ë°~~)_
</small>
<hr/>

## Redux

![image-redux](../assets/img/2023-10-17/image-redux.png){: .w-50 }

ë§ì´ë“¤ ì‚¬ìš©í•˜ëŠ” `redux`. ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë§ˆë‹¤ ì“°ëŠ”ë²•ì´ ë‹¤ì–‘í•œë°

ì™œëƒë©´ `Redux` ìì²´ê°€

ì—¬ëŸ¬ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë§ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë¡œ ì¸í•´ ì‚¬ìš©í•˜ê¸°ê°€ ì€ê·¼ ê¹Œë‹¤ë¡œìš¸ ì •ë„

ìµœëŒ€í•œ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

```ts
{% raw %}
// store.ts
import { legacy_createStore as createStore } from "redux";

// ì•¡ì…˜ íƒ€ì… ì •ì˜
const INCREMENT = "INCREMENT";

// ì•¡ì…˜ ìƒì„±ì
export const incrementSummary = () => ({ type: INCREMENT });

// ì´ˆê¸° ìƒíƒœ ì •ì˜
interface AppState {
  summary: number;
}

const initialState: AppState = {
  summary: 0,
};

// ë¦¬ë“€ì„œ í•¨ìˆ˜
const appReducer = (state = initialState, action: any) => {
  switch (action.type) {
    case INCREMENT:
      return {
        ...state,
        summary: state.summary + 1,
      };
    default:
      return state;
  }
};

// ìŠ¤í† ì–´ ìƒì„±
const store = createStore(appReducer);

export default store;
{% endraw %}
```
> ìƒíƒœê´€ë¦¬ë¥¼ í•˜ê¸° ìœ„í•œ store ë¥¼ ìƒì„±í•´ì¤€ë‹¤.

```tsx
// main.tsx

import ReactDOM from "react-dom/client";
import App from "./App.tsx";
import { BrowserRouter } from "react-router-dom";
import { Provider } from "react-redux";
import store from "./utils/store.tsx";

ReactDOM.createRoot(document.getElementById("root")!).render(
  <BrowserRouter>
    <Provider store={store}>
      <App />
    </Provider>
  </BrowserRouter>
);
```

> ìµœìƒë‹¨ì— Provider ë¡œ `store` ë¥¼ ê±¸ì–´ì„œ state ë¥¼ ì œê³µí•´ì¤€ë‹¤.

```tsx
// Test.tsx
import { useDispatch, useSelector } from "react-redux";
import { incrementSummary } from "./utils/store";

export default function Test() {
  const dispatch = useDispatch(); // ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜
  const summary = useSelector((state: any) => state.summary);
  // useSelector ì‚¬ìš©í•˜ì—¬ Redux ìŠ¤í† ì–´ì˜ ìƒíƒœë¥¼ ì„ íƒ
  return (
    <div>
      <h1>Summary: {summary}</h1>
      <button onClick={() => dispatch(incrementSummary())}>Increment</button>
    </div>
  );
}
```

~~ê°œì¸ì ìœ¼ë¡œ ë„ˆë¬´ ì–´ë µë‹¤.~~

<br/>

## Recoil

![image-recoil](../assets/img/2023-10-17/image-recoil.png){: .w-50 }

ë‚´ê°€ ì œì¼ ìì£¼ ì“°ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬, ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ì— ì•„ì£¼ ìœ ìš©í•˜ë‹¤ê³  ìƒê°í•œë‹¤.

```tsx
import ReactDOM from "react-dom/client";
import App from "./App.tsx";
import { BrowserRouter } from "react-router-dom";
import { RecoilRoot } from "recoil";

ReactDOM.createRoot(document.getElementById("root")!).render(
  <BrowserRouter>
    <RecoilRoot>
      <App />
    </RecoilRoot>
  </BrowserRouter>
);
```

> ë¨¼ì € Recoil ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìµœìƒë‹¨ì— RecoilRoot ë¥¼ ê±¸ì–´ì¤€ë‹¤

<br/>

```tsx
import { atom } from "recoil";

export const summaryState = atom({
  key: "summaryState",
  default: 0,
}); // ê³ ìœ  í‚¤ ê°’ê³¼ ê¸°ë³¸ ê°’ ì •ì˜

import { selector } from 'recoil';

const charCountState = selector({
  key: 'charCountState',
  get: ({get}) => {
    const text = get(textState);
    return text.length;
  },
}); // atom ê°’ì„ ì§ì ‘ ë°”ê¿” íŒŒìƒìƒíƒœë¡œ ì‚¬ìš©ë„ ê°€ëŠ¥
```

> atom ìœ¼ë¡œ ê³ ìœ  key ê°’ê³¼ initial-state ë¥¼ ì§€ì •í•œë‹¤
>
> selector ë¥¼ ì‚¬ìš©í•´ ë‹¤ë¥¸ ê°’ì„ íŒŒìƒìƒíƒœë¡œ ì‚¬ìš©ë„ ê°€ëŠ¥í•˜ë‹¤

```tsx
import { useRecoilState } from "recoil";
import { summaryState } from "./utils/atoms";

export default function Test() {
  const [summary, setSummary] = useRecoilState(summaryState);

  const onPlus = () => {
    setSummary((current) => (current += 1));
  };

  return (
    <div>
      <h2>{summary}</h2>
      <button onClick={onPlus}>+++</button>
    </div>
  );
}
```

> ì‚¬ìš©ì‹œì—ëŠ” ë§¤ìš° ê°„ë‹¨í•˜ê²Œ `useState()` ì²˜ëŸ¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤!

<br/>
<hr/>

## Zustand

![image-zustand](../assets/img/2023-10-17/image-zustand.png){: .w-50 }

`zustand` ëŠ” ë…ì¼ì–´ë¡œ `ìƒíƒœ` ë¼ëŠ” ëœ»ì´ë‹¤.

ì—¬íƒœ ì†Œê°œí•œ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë³´ë‹¤ ê°€ë²¼ìš°ë©° ì“°ê¸°ë„ ë§¤ìš° í¸í•œ ì¶•ì— ì†í•œë‹¤.

ì½”ë“œë¥¼ ë¨¼ì € ì•Œì•„ë³´ì

```ts
// util/store.ts
{% raw %}
import { create } from "zustand";

interface IStore {
  count: number;
  increment: () => void;
}

export const useStore = create<IStore>()((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
}));
{% endraw %}
```

```tsx
// test.tsx
import { useStore } from "./utils/store";

export default function Test() {
  const { count, increment } = useStore();

  return (
    <div>
      <span>{count}</span>
      <button onClick={increment}>+++</button>
    </div>
  );
}
```

> ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì²˜ëŸ¼ `main.tsx` ì— `Provider` ê°™ì€ê±¸ ê±¸ì§€ ì•Šì•„ë„ ëœë‹¤ !

<br/>
<hr/>

## ë§ˆì¹˜ë©°

`zustand` ê°€ ìƒê°ë³´ë‹¤ ë§¤ìš° ê°€ë³ê³  ê°„ë‹¨í•´ì„œ ë§˜ì— ë“¤ì—ˆë‹¤.

ë‹¤ìŒ í”„ë¡œì íŠ¸ í•  ë•Œ ì¨ë´ì•¼ê² ë‹¤.

~~`Redux` ë„ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ë§ì•„ ì œëŒ€ë¡œ ë°°ì›Œì•¼ í•˜ëŠ”ë° ì€ê·¼ ì–´ë µë”ë¼~~